<template>
    <div class="flex justify-around mt-6">

        <!-- PIECES -->
        <SumUnit
            title="Pieces"
            measureUnit="pcs"
            :value="props.parcels.length"
        >
            <svg width="36" height="32" viewBox="0 0 36 32" fill="none" xmlns="http://www.w3.org/2000/svg"> <path fill-rule="evenodd" clip-rule="evenodd" d="M13.9402 1.53945C11.411 2.55685 10.0652 3.13351 9.95434 3.24726C9.86227 3.34175 9.78097 3.49847 9.77372 3.5955C9.76648 3.69253 9.76402 5.86218 9.76831 8.41698L9.77611 13.0621L9.96953 13.2545C10.2041 13.4878 17.6633 16.5089 18.0049 16.5089C18.3465 16.5089 25.8058 13.4878 26.0403 13.2545L26.2337 13.0621L26.2416 8.41698C26.2458 5.86218 26.2435 3.69253 26.2362 3.5955C26.229 3.49847 26.1384 3.33568 26.035 3.23371C25.7943 2.99647 18.3233 -0.00493345 17.9857 6.09009e-06C17.8605 0.00184078 16.0484 0.69133 13.9402 1.53945ZM20.7289 2.62523C22.2083 3.21713 23.4187 3.71722 23.4187 3.73663C23.4187 3.75603 22.2006 4.25923 20.7118 4.85494L18.0049 5.9379L15.2981 4.85494C13.8093 4.25923 12.5911 3.75603 12.5911 3.73663C12.5911 3.69937 17.8495 1.56704 17.9693 1.55575C18.0078 1.55208 19.2497 2.03333 20.7289 2.62523ZM14.2433 6.05151L17.1961 7.23728L17.2143 10.9493L17.2325 14.6614L14.2428 13.4608L11.2531 12.2602V8.56291C11.2531 6.52945 11.2615 4.86567 11.2718 4.86567C11.2821 4.86567 12.6193 5.39928 14.2433 6.05151ZM24.7568 8.56291V12.2602L21.767 13.4608L18.7773 14.6614L18.7955 10.9493L18.8137 7.23707L21.7325 6.05779C23.3378 5.40923 24.675 4.87562 24.704 4.87209C24.7331 4.86856 24.7568 6.52945 24.7568 8.56291ZM4.14957 16.6131C0.72702 17.9919 0.23104 18.2106 0.123432 18.3881C0.00998711 18.5754 0.000703318 18.9467 0.000351659 23.3349L0 28.0793L0.193412 28.289C0.347931 28.4566 1.16779 28.8113 4.27294 30.0542C6.41032 30.9098 8.20033 31.6098 8.25076 31.6098C8.37883 31.6098 16.0142 28.5352 16.2166 28.4022C16.3073 28.3425 16.4161 28.1746 16.4583 28.0289C16.5114 27.8458 16.5286 26.3306 16.514 23.1259L16.4928 18.4879L16.3119 18.3064C16.1008 18.0946 8.51619 15.0245 8.22882 15.0344C8.13211 15.0378 6.29645 15.7482 4.14957 16.6131ZM23.742 16.5766C21.0812 17.643 19.8226 18.1814 19.698 18.3064L19.5171 18.4879L19.4959 23.1259C19.4813 26.3306 19.4985 27.8458 19.5515 28.0289C19.5938 28.1746 19.7026 28.3425 19.7933 28.4022C19.9957 28.5352 27.631 31.6098 27.7591 31.6098C27.8095 31.6098 29.5995 30.9089 31.7369 30.0523C34.2636 29.0397 35.6846 28.4344 35.7989 28.3219L35.9747 28.1489L35.9928 23.3698C36.0101 18.8298 36.0044 18.58 35.8812 18.3788C35.765 18.1893 35.3414 18.0027 31.8359 16.5971C29.6823 15.7335 27.8494 15.0273 27.7628 15.0277C27.6761 15.0281 25.8668 15.7251 23.742 16.5766ZM10.9802 17.6838L13.7318 18.7881L11.0339 19.8713C9.55014 20.467 8.29662 20.9545 8.24837 20.9545C8.11467 20.9545 2.81081 18.8165 2.84907 18.778C2.8675 18.7596 4.07755 18.2618 5.53806 17.6719C6.99864 17.082 8.20153 16.5949 8.21116 16.5894C8.2208 16.5839 9.46687 17.0764 10.9802 17.6838ZM30.4888 17.6755C31.9201 18.2483 33.1151 18.7379 33.1443 18.7636C33.1974 18.8101 27.9287 20.9545 27.7615 20.9545C27.7132 20.9545 26.4597 20.467 24.9759 19.8713L22.2781 18.7881L25.0119 17.6869C26.5156 17.0812 27.7775 16.5966 27.8162 16.6098C27.8549 16.6231 29.0576 17.1027 30.4888 17.6755ZM4.72981 21.2026L7.5255 22.3224V26.0182C7.5255 29.506 7.51861 29.7118 7.40242 29.6746C7.33469 29.6529 5.98172 29.1141 4.39573 28.4772L1.51213 27.3193L1.49392 23.6064L1.4757 19.8936L1.70491 19.9881C1.83102 20.0401 3.19222 20.5867 4.72981 21.2026ZM14.9285 27.3131C14.889 27.3512 11.4212 28.7599 9.09038 29.6847C9.02075 29.7123 9.00247 28.9502 9.00247 26.0147V22.3097L11.974 21.1168L14.9455 19.9238L14.9637 23.5927C14.9737 25.6107 14.9579 27.2848 14.9285 27.3131ZM27.0074 26.0073C27.0074 28.0407 26.999 29.7045 26.9887 29.7045C26.9784 29.7045 25.6412 29.1709 24.0172 28.5187L21.0644 27.3329L21.0461 23.6208L21.0279 19.9088L24.0177 21.1094L27.0074 22.3099V26.0073ZM34.4808 27.3085C34.4265 27.3561 28.5836 29.7045 28.5195 29.7045C28.5001 29.7045 28.4844 28.0435 28.4844 26.0133V22.3222L31.491 21.1165L34.4977 19.9108L34.5159 23.5862C34.5259 25.6077 34.5101 27.2827 34.4808 27.3085Z" fill="#003DF6" data-darkreader-inline-fill="" style="--darkreader-inline-fill: #0031c5;"></path></svg>
        </SumUnit>

        <!-- WEIGHT -->
        <SumUnit
            title="Weight"
            measureUnit="kg"
            :value="totalWeight"
        >
            <svg width="37" height="36" viewBox="0 0 37 36" fill="none" xmlns="http://www.w3.org/2000/svg"> <path fill-rule="evenodd" clip-rule="evenodd" d="M27.9448 0.0889183C24.7646 0.636725 22.2174 3.10179 21.671 6.16064C20.9412 10.2452 23.6788 14.1018 27.8574 14.8755C28.1736 14.9341 28.4451 14.9819 28.4608 14.9819C28.4764 14.9819 28.481 18.3644 28.4709 22.4985L28.4525 30.015L25.008 30.0333L21.5635 30.0515V22.1272C21.5635 15.4379 21.5475 14.1656 21.461 13.9634C21.2509 13.4727 21.8607 13.5033 12.2906 13.5033C4.30285 13.5033 3.64447 13.5122 3.45266 13.6228C3.33868 13.6885 3.22002 13.7915 3.189 13.8516C3.15805 13.9118 3.11643 17.5731 3.09659 21.988L3.06052 30.015L1.76207 30.0509C1.04792 30.0707 0.410886 30.1122 0.346469 30.1431C0.282051 30.1739 0.174496 30.3003 0.107553 30.424C-0.00130014 30.6249 -0.011832 30.9105 0.00829398 33.1291L0.0308005 35.6097L0.230834 35.8048L0.430796 36H18.4616H36.4924L36.6924 35.8048L36.8924 35.6097L36.9149 33.1291C36.9348 30.9288 36.9239 30.6237 36.818 30.4281C36.7523 30.3068 36.6189 30.1721 36.5216 30.1289C36.3997 30.0747 35.3566 30.0502 33.174 30.0502H30.0034V22.5174V14.9846L30.1657 14.9529C30.255 14.9354 30.5366 14.8846 30.7916 14.8399C32.1006 14.6107 33.4467 13.9186 34.521 12.9225C38.5161 9.21807 37.3346 2.78331 32.2571 0.59293C31.0596 0.0763863 29.2475 -0.135415 27.9448 0.0889183ZM30.6957 1.67355C32.5129 2.08912 34.1087 3.39625 34.8815 5.10206C35.3496 6.13522 35.5066 7.74343 35.2433 8.80884C34.7836 10.6693 33.5566 12.1372 31.7956 12.9334C31.0173 13.2854 30.4264 13.428 29.5345 13.4791C28.2602 13.5522 26.9154 13.1934 25.8343 12.4919C25.1931 12.0758 24.3346 11.196 23.9446 10.5553C22.0979 7.52107 23.3613 3.53426 26.6365 2.06081C27.9587 1.46604 29.2497 1.34282 30.6957 1.67355ZM28.6994 3.21768L28.4885 3.4235V4.79717V6.17084L28.2783 6.31695C28.0158 6.49939 27.6951 7.11472 27.6951 7.43587C27.6951 8.3018 28.4072 8.99691 29.2943 8.99691C29.6672 8.99691 30.2707 8.67315 30.4838 8.35883C30.9125 7.72653 30.854 7.0479 30.3207 6.46904L30.0034 6.12451V4.84308C30.0034 3.77394 29.9835 3.52884 29.8833 3.36323C29.6367 2.95582 29.0426 2.88273 28.6994 3.21768ZM9.24426 18.5362L9.26424 22.0905L9.4642 22.2857L9.66409 22.4809L12.2054 22.5028C14.4783 22.5225 14.7709 22.5122 14.9768 22.4059C15.1035 22.3406 15.2333 22.2356 15.2653 22.1727C15.2974 22.1098 15.3399 20.4741 15.3598 18.5378L15.3958 15.0172L17.6861 14.9986L19.9765 14.98V22.4799V29.9798H12.294H4.61145V22.4809V14.9819H6.91786H9.22435L9.24426 18.5362ZM13.8449 18.0463V21.0402L12.312 21.0212L10.7791 21.0022L10.7603 18.0273L10.7414 15.0524H12.2932H13.8449V18.0463ZM35.397 33.0251L35.3776 34.5213H18.4616H1.54566L1.52618 33.0251L1.50671 31.5288H18.4616H35.4165L35.397 33.0251Z" fill="#003DF6" data-darkreader-inline-fill="" style="--darkreader-inline-fill: #0031c5;"></path></svg>
        </SumUnit>

        <!-- AREA -->
        <SumUnit
            title="Area"
            measureUnit="m&sup2"
            :value="totalArea"
        >
            <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg"> <path fill-rule="evenodd" clip-rule="evenodd" d="M17.5787 0.0966811C17.482 0.148642 13.6535 1.82236 9.07095 3.81445C4.48838 5.80662 0.62503 7.49215 0.485743 7.5586C-0.0399784 7.80926 0.00073215 6.92789 0.00073215 17.9912C0.00073215 29.0391 -0.0361112 28.2367 0.479977 28.4502C0.622429 28.5091 4.58963 30.2366 9.29594 32.2822C14.0022 34.3279 17.9256 36.0008 18.0146 36C18.1035 35.9992 22.1314 34.2704 26.9653 32.168C34.5883 28.8526 35.7705 28.3261 35.8769 28.1514C35.9921 27.9623 35.9996 27.3383 36 18.0088C36.0003 8.82085 35.9914 8.05134 35.882 7.86621C35.736 7.61906 36.4928 7.96831 26.432 3.59473C21.5611 1.47734 18.0801 -0.00168606 17.9594 1.44253e-06C17.8467 0.00154832 17.6753 0.0447905 17.5787 0.0966811ZM17.2102 16.1104L17.192 19.7842L9.38735 23.1768C5.09482 25.0441 1.55905 26.5774 1.53001 26.5781C1.50097 26.5789 1.47728 22.5676 1.47728 17.666V8.75391L9.33462 5.33496L17.192 1.92481L17.2101 6.31934C17.2558 17.4599 17.2507 7.92447 17.2102 16.1104ZM27.018 5.48438L34.5238 8.75391V17.666C34.5238 26.1274 34.5175 26.581 34.4007 26.543C34.333 26.5209 30.7973 24.9919 26.5434 23.1416L18.8091 19.7754L18.7909 16.1016C18.7501 7.8604 18.8413 18.6834 18.7911 6.33692L18.7729 1.89844L19.1426 2.05664C19.3459 2.1458 22.8899 3.68909 27.018 5.48438ZM25.7527 24.4336C29.9197 26.246 33.3052 27.7484 33.276 27.7734C33.1701 27.8644 18.1031 34.3836 18.0005 34.3828C17.898 34.382 2.83057 27.8626 2.72531 27.7734C2.64923 27.709 17.8675 21.0958 18.0357 21.1201C18.113 21.1313 21.5857 22.6212 25.7527 24.4336Z" fill="#003DF6" data-darkreader-inline-fill="" style="--darkreader-inline-fill: #0031c5;"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M15.3105 24.786C15.446 25.087 15.3119 25.4408 15.0109 25.5764L10.1759 27.7536L14.9876 29.6797C15.2941 29.8023 15.4431 30.1502 15.3204 30.4566C15.1977 30.7631 14.8499 30.912 14.5435 30.7894L8.42634 28.3409C8.20379 28.2518 8.05599 28.0383 8.05092 27.7987C8.04584 27.559 8.18446 27.3395 8.40304 27.241L14.5202 24.4864C14.8211 24.3509 15.175 24.485 15.3105 24.786Z" fill="#003DF6" data-darkreader-inline-fill="" style="--darkreader-inline-fill: #3893ff;"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M19.9864 30.4796C19.8508 30.1787 19.985 29.8248 20.2859 29.6893L25.121 27.512L20.3092 25.586C20.0028 25.4633 19.8538 25.1154 19.9765 24.809C20.0991 24.5026 20.447 24.3536 20.7534 24.4762L26.8705 26.9248C27.0931 27.0139 27.2409 27.2273 27.246 27.467C27.251 27.7066 27.1124 27.9262 26.8938 28.0246L20.7767 30.7792C20.4757 30.9147 20.1219 30.7806 19.9864 30.4796Z" fill="#003DF6" data-darkreader-inline-fill="" style="--darkreader-inline-fill: #3893ff;"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M9.5625 27.5625C9.5625 27.213 9.84582 26.9297 10.1953 26.9297L24.7498 26.9297C25.0993 26.9297 25.3826 27.213 25.3826 27.5625C25.3826 27.912 25.0993 28.1953 24.7498 28.1953L10.1953 28.1953C9.84582 28.1953 9.5625 27.912 9.5625 27.5625Z" fill="#003DF6" data-darkreader-inline-fill="" style="--darkreader-inline-fill: #3893ff;"></path></svg>
        </SumUnit>

        <!-- VOLUME -->
        <SumUnit
            title="Volume"
            measureUnit="m&sup3"
            :value="totalVolume"
        >
            <svg width="36" height="34" viewBox="0 0 36 34" fill="none" xmlns="http://www.w3.org/2000/svg"> <path fill-rule="evenodd" clip-rule="evenodd" d="M9.1988 3.5213C4.4548 5.4578 0.505421 7.06245 0.422311 7.08719C0.33927 7.11192 0.210315 7.22597 0.135782 7.3406C0.00366276 7.54389 0.000217394 7.78273 6.45292e-06 16.8722C-0.000274802 25.5412 0.00816284 26.2086 0.11968 26.3857C0.212987 26.5339 0.450928 26.6634 1.19196 26.9695C7.33408 29.5065 17.7332 33.7243 17.9074 33.7492C18.0893 33.7753 19.6772 33.1508 26.4153 30.403C36.4949 26.2927 35.736 26.6149 35.882 26.3831C35.9914 26.2094 36.0003 25.4913 36 16.8722C35.9996 8.12031 35.9921 7.53756 35.8769 7.36019C35.7705 7.19628 34.5883 6.69552 26.965 3.58541C22.131 1.61317 18.0967 -0.000263805 18 3.23535e-08C17.9034 0.000263869 13.9428 1.58487 9.1988 3.5213ZM25.7345 4.61207C29.8532 6.29251 33.2468 7.68695 33.276 7.71077C33.3051 7.73464 31.7797 8.38606 29.8861 9.15844L26.4433 10.5628L22.415 8.83293C19.8265 7.72139 18.2792 7.09194 18.0858 7.07195C17.8615 7.04873 17.6915 7.08231 17.4178 7.2038C17.216 7.29344 15.3647 8.08555 13.304 8.96399L9.55712 10.5613L6.9406 9.49358C2.75862 7.78715 2.67692 7.75298 2.7094 7.72257C2.72642 7.70661 6.13424 6.30478 10.2823 4.60745C15.6755 2.40065 17.8844 1.52643 18.0352 1.53903C18.1512 1.54872 21.6159 2.93162 25.7345 4.61207ZM5.35552 10.3806L8.96472 11.8545L8.99988 15.9049C9.03145 19.5427 9.04699 19.9719 9.15225 20.1173C9.23867 20.2366 10.3152 20.7215 13.2463 21.9612L17.223 23.6432L17.2248 27.8103L17.2266 31.9776L15.4863 31.2682C14.5291 30.878 10.9854 29.4333 7.61118 28.0575L1.47631 25.5563V17.1913C1.47631 8.97257 1.4787 8.82713 1.61132 8.86664C1.68557 8.88873 3.37049 9.57002 5.35552 10.3806ZM17.2266 12.2853V15.7354L13.9123 17.1498C12.0894 17.9278 10.5703 18.5743 10.5366 18.5865C10.502 18.599 10.4831 17.1046 10.4934 15.157L10.5116 11.7054L13.8515 10.2757C15.6885 9.48942 17.1994 8.84368 17.209 8.84071C17.2186 8.83775 17.2266 10.3878 17.2266 12.2853ZM22.6056 10.4718L25.4884 11.7045L25.5067 15.1566C25.5169 17.1044 25.4981 18.599 25.4635 18.5865C25.4297 18.5743 23.9107 17.9278 22.0878 17.1498L18.7735 15.7354V12.2891V8.84282L19.2481 9.04097C19.5091 9.15 21.02 9.79383 22.6056 10.4718ZM34.5238 17.1965V25.5577L26.7717 28.7162C22.508 30.4534 18.964 31.9012 18.896 31.9334C18.7787 31.9892 18.7733 31.7817 18.7906 27.8195L18.8086 23.6468L22.7797 21.9531C25.5565 20.7689 26.7831 20.2141 26.8579 20.1083C26.9499 19.9784 26.97 19.3859 27.0002 15.9069L27.0353 11.8566L30.7268 10.3483C32.7571 9.51871 34.442 8.83893 34.471 8.83768C34.5001 8.83636 34.5238 12.5978 34.5238 17.1965ZM21.2532 18.3382C22.9834 19.0753 24.3753 19.6984 24.3461 19.7228C24.3169 19.7473 22.8788 20.3687 21.1503 21.1038L18.0075 22.4403L14.8572 21.103C13.1246 20.3675 11.6833 19.7463 11.6544 19.7225C11.5942 19.6731 17.9275 16.9506 18.036 16.9792C18.0751 16.9896 19.5228 17.6011 21.2532 18.3382Z" fill="#003DF6" data-darkreader-inline-fill="" style="--darkreader-inline-fill: #0031c5;"></path></svg>
        </SumUnit>

    </div>
</template>

<script setup>
import { reactive, computed, watch, onMounted, ref, onUpdated, nextTick } from 'vue';
import _ from 'lodash';
import SumUnit from './SumUnit.vue';


let props = defineProps({
    parcels: {
        type: Array,
        required: true,
    },
});

/**
 * Calculates the total weight of all parcels
 */
let totalWeight = computed(
    () => {
  	    let weight = 0;
        //Take the weight of each parcel and add it to the total weight
        props.parcels.forEach(
            parcel => {
                weight += parcel.p_weight;
            }
        );
        return weight;
    }
);

/**
 * Calculates the total volume of all parcels, in m3
 */
let totalVolume = computed(
    () => {
  	    let volume = 0;
        props.parcels.forEach(
            parcel => {
                let parcelVolume = parcel.p_length * parcel.p_width * parcel.p_height;//in cm3
                volume += parcelVolume;
            }
        );
        //converting from cm3 to m3
        volume = volume / 1000000;
        return volume;
    }
);

/**
 * Calculates the total area of all parcels, in m2
 */
let totalArea = computed(
    () => {
  	    let area = 0;
        props.parcels.forEach(
            parcel => {
                let parcelArea = parcel.p_length * parcel.p_width;//in cm2
                area += parcelArea;
            }
        );
        //converting from cm2 to m2
        area = area / 10000;
        return area;
    }
);





</script>

<style scoped>
</style>
